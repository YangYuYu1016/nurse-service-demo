<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>护士端流程</title>
    <style>
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
          Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue",
          sans-serif;
      }
      body {
        background-color: #f0f2f5;
      }
      /* 添加导航菜单样式 */
      .nav-menu {
        display: flex;
        background: #fff;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        margin-bottom: 15px;
        overflow-x: auto;
        padding: 10px 5px;
        position: sticky;
        top: 0;
        z-index: 100;
      }
      .nav-item {
        flex: 1;
        min-width: 80px;
        text-align: center;
        padding: 8px 5px;
        font-size: 12px;
        border-radius: 5px;
        margin: 0 3px;
        cursor: pointer;
        white-space: nowrap;
      }
      .nav-item.active {
        background: #4d7cfe;
        color: white;
      }
      .nav-item:hover:not(.active) {
        background: #f0f0f0;
      }
      .screen-wrapper {
        display: none;
        width: 100%;
        max-width: 450px;
        margin: 0 auto;
      }
      .screen-wrapper.active {
        display: block;
      }
      .screen-title {
        margin: 10px 0;
        text-align: center;
        color: #888;
      }
      .screen {
        background-color: #fff;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }
      .header {
        background-color: #4d7cfe;
        color: white;
        padding: 15px;
        position: relative;
        font-weight: bold;
      }
      .header .back {
        position: absolute;
        left: 15px;
        cursor: pointer;
        font-weight: normal;
      }
      .header .right {
        position: absolute;
        right: 15px;
        cursor: pointer;
        font-weight: normal;
      }
      .content {
        padding: 15px;
      }
      .flex {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .card {
        background-color: white;
        border-radius: 8px;
        padding: 15px;
        margin-bottom: 15px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        position: relative;
      }
      .notice-bar {
        background-color: #e6f7ff;
        color: #1890ff;
        padding: 8px 15px;
        border-radius: 8px;
        margin-bottom: 15px;
        display: flex;
        align-items: center;
      }
      .notice-bar i {
        margin-right: 5px;
      }
      .filter-bar {
        display: flex;
        overflow-x: auto;
        padding-bottom: 10px;
        margin-bottom: 10px;
      }
      .filter-btn {
        background: none;
        border: 1px solid #ddd;
        padding: 6px 12px;
        border-radius: 15px;
        margin-right: 8px;
        font-size: 12px;
        white-space: nowrap;
        cursor: pointer;
      }
      .filter-btn.active {
        background-color: #4d7cfe;
        color: white;
        border-color: #4d7cfe;
      }
      h3 {
        margin-bottom: 10px;
        font-size: 16px;
      }
      .tag {
        background-color: #f0f0f0;
        padding: 2px 6px;
        border-radius: 3px;
        font-size: 12px;
        margin-right: 5px;
      }
      .tag.urgent {
        background-color: #fff1f0;
        color: #ff4d4f;
      }
      .item-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 8px;
        font-size: 14px;
      }
      .item-row > span:first-child {
        color: #666;
      }
      .distance {
        color: #4d7cfe;
        font-size: 12px;
        margin-left: 5px;
      }
      .avatar {
        width: 40px;
        height: 40px;
        background-color: #eee;
        border-radius: 50%;
        margin-right: 10px;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 12px;
      }
      .badge {
        background-color: #ff4d4f;
        color: white;
        border-radius: 10px;
        padding: 0 5px;
        font-size: 12px;
        margin-left: 5px;
      }
      .btn {
        background-color: #4d7cfe;
        color: white;
        border: none;
        padding: 10px 15px;
        border-radius: 4px;
        cursor: pointer;
        width: 100%;
        margin-top: 5px;
        font-size: 14px;
      }
      .btn.small {
        padding: 5px 10px;
        width: auto;
      }
      .btn.secondary {
        background-color: #f0f0f0;
        color: #333;
      }
      .btn.success {
        background-color: #52c41a;
      }
      .btn.danger {
        background-color: #ff4d4f;
      }
      .btn.floating {
        position: fixed;
        bottom: 30px;
        right: 30px;
        width: 50px;
        height: 50px;
        border-radius: 25px;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 24px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        z-index: 100;
      }
      .btn-group {
        display: flex;
        gap: 10px;
      }
      .btn-group .btn {
        margin-top: 0;
      }
      .process-wrapper {
        margin: 20px 0;
        padding: 0 10px;
      }
      .process-track {
        display: flex;
        justify-content: space-between;
        position: relative;
        margin-bottom: 10px;
      }
      .process-track:before {
        content: "";
        position: absolute;
        top: 15px;
        left: 0;
        width: 100%;
        height: 2px;
        background-color: #eee;
        z-index: 1;
      }
      #progressLine {
        position: absolute;
        top: 15px;
        left: 0;
        height: 2px;
        background-color: #4d7cfe;
        z-index: 2;
        transition: width 0.3s;
      }
      .process-step {
        width: 30px;
        height: 30px;
        border-radius: 15px;
        background-color: #fff;
        border: 2px solid #eee;
        z-index: 3;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 14px;
        position: relative;
      }
      .process-step.active {
        border-color: #4d7cfe;
        background-color: #4d7cfe;
        color: white;
      }
      .process-step.completed {
        border-color: #4d7cfe;
        background-color: #4d7cfe;
        color: white;
      }
      .process-step-label {
        position: absolute;
        top: 40px;
        left: 50%;
        transform: translateX(-50%);
        white-space: nowrap;
        font-size: 12px;
        color: #666;
      }
      .sop-step {
        margin-bottom: 15px;
        padding-bottom: 15px;
        border-bottom: 1px solid #f0f0f0;
      }
      .sop-step:last-child {
        margin-bottom: 0;
        padding-bottom: 0;
        border-bottom: none;
      }
      .step-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 5px;
      }
      .required-tag {
        font-size: 12px;
        color: #4d7cfe;
        background: #e6f7ff;
        padding: 2px 6px;
        border-radius: 3px;
      }
      .step-details {
        margin-top: 5px;
        padding-left: 20px;
        font-size: 13px;
        color: #666;
      }
      textarea {
        width: 100%;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 4px;
        resize: none;
        margin-top: 10px;
        font-size: 14px;
      }
      .action-bar {
        display: flex;
        justify-content: space-around;
        padding: 15px;
        box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.05);
      }
      .action-btn {
        display: flex;
        flex-direction: column;
        align-items: center;
        color: #666;
        font-size: 12px;
        background: none;
        border: none;
        cursor: pointer;
      }
      .action-icon {
        width: 24px;
        height: 24px;
        background-color: #f0f0f0;
        border-radius: 12px;
        margin-bottom: 5px;
      }
      .toast {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background-color: rgba(0, 0, 0, 0.7);
        color: white;
        padding: 10px 20px;
        border-radius: 4px;
        z-index: 1000;
        display: none;
      }

      /* 新增: 弹窗样式 */
      .overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 900;
        display: none;
      }
      .popup {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background-color: white;
        border-radius: 8px;
        padding: 20px;
        width: 90%;
        max-width: 400px;
        max-height: 90vh;
        overflow-y: auto;
        z-index: 1000;
        display: none;
      }
      .popup.wide-popup {
        max-width: 600px;
      }
      .popup h3 {
        margin-bottom: 20px;
        text-align: center;
      }

      /* 应急处理弹窗样式 */
      .emergency-popup {
        max-width: 500px;
      }
      .emergency-header {
        margin-bottom: 20px;
      }
      .emergency-type {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        margin-top: 10px;
      }
      .emergency-btn {
        padding: 8px 12px;
        border-radius: 4px;
        border: 1px solid #ddd;
        background: none;
        cursor: pointer;
      }
      .emergency-btn.active {
        background-color: #4d7cfe;
        color: white;
        border-color: #4d7cfe;
      }
      .emergency-step {
        display: flex;
        margin-bottom: 15px;
      }
      .step-number {
        width: 28px;
        height: 28px;
        background-color: #4d7cfe;
        color: white;
        border-radius: 14px;
        display: flex;
        justify-content: center;
        align-items: center;
        margin-right: 15px;
        flex-shrink: 0;
      }
      .step-title {
        font-weight: bold;
        margin-bottom: 5px;
      }
      .step-desc {
        color: #666;
        font-size: 14px;
      }
      .emergency-action-btn {
        background-color: #ff4d4f;
        color: white;
        border: none;
        padding: 8px 15px;
        border-radius: 4px;
        margin-top: 10px;
        margin-right: 10px;
        cursor: pointer;
      }
      .vital-signs-form {
        margin-top: 10px;
        background-color: #f9f9f9;
        padding: 10px;
        border-radius: 4px;
      }
      .vital-sign-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 8px;
      }
      .vital-sign-row input,
      .vital-sign-row select {
        width: 150px;
        padding: 5px;
        border: 1px solid #ddd;
        border-radius: 4px;
      }
      .emergency-footer {
        margin-top: 20px;
        display: flex;
        gap: 10px;
      }

      /* 患者档案管理弹窗样式 */
      .profile-tabs {
        display: flex;
        border-bottom: 1px solid #eee;
        margin-bottom: 15px;
      }
      .profile-tab {
        padding: 10px 15px;
        cursor: pointer;
        border-bottom: 2px solid transparent;
      }
      .profile-tab.active {
        border-bottom-color: #4d7cfe;
        color: #4d7cfe;
      }
      .profile-section {
        margin-bottom: 20px;
      }
      .profile-section h4 {
        margin-bottom: 10px;
        font-size: 15px;
      }
      .profile-info-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
      }
      .profile-info-item {
        background-color: #f9f9f9;
        padding: 10px;
        border-radius: 4px;
      }
      .profile-info-item.wide {
        grid-column: span 2;
      }
      .info-label {
        color: #666;
        font-size: 12px;
        margin-bottom: 5px;
      }
      .info-value {
        font-size: 14px;
      }
      .info-value.warning {
        color: #ff5252;
      }

      /* 准备清单弹窗样式 */
      .checklist-section {
        margin-bottom: 15px;
      }
      .checklist-section h4 {
        margin: 0 0 10px 0;
        font-size: 15px;
      }
      .checklist-item {
        margin-bottom: 8px;
        display: flex;
        align-items: center;
      }
      .checklist-item input {
        margin-right: 8px;
      }
      .checklist-item label.warning {
        color: #ff5252;
      }
      .confirm-section {
        margin: 15px 0;
        padding-top: 15px;
        border-top: 1px solid #eee;
      }

      /* 新增通用样式 */
      .skills-match-tag {
        position: absolute;
        right: 15px;
        top: 15px;
        background: #e6f7ff;
        color: #1890ff;
        font-size: 12px;
        padding: 2px 8px;
        border-radius: 10px;
      }
      .equipment-status {
        margin-left: 5px;
        font-size: 12px;
        padding: 1px 5px;
        border-radius: 3px;
      }
      .equipment-status.complete {
        background: #e6ffed;
        color: #52c41a;
      }
      .equipment-status.incomplete {
        background: #fff1f0;
        color: #ff4d4f;
      }
      .location-tag {
        background: #f0f0f0;
        font-size: 12px;
        padding: 2px 6px;
        border-radius: 3px;
        margin-left: 5px;
      }
      .assessment-summary {
        background: #f9f9f9;
        border-radius: 10px;
        padding: 15px;
        margin-bottom: 15px;
      }
      .summary-item {
        display: flex;
        align-items: center;
        margin-bottom: 8px;
      }
      .summary-item i {
        margin-right: 8px;
      }
      .summary-item.normal {
        color: #52c41a;
      }
      .summary-item.warning {
        color: #faad14;
      }
      .summary-item.danger {
        color: #ff4d4f;
      }

      /* 远程会诊样式 */
      .remote-doctors {
        margin-bottom: 15px;
      }
      .doctor-item {
        background: #f9f9f9;
        border-radius: 8px;
        padding: 10px;
        margin-bottom: 10px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .status {
        font-size: 12px;
        margin-top: 5px;
      }
      .status.online {
        color: #52c41a;
      }
      .status.offline {
        color: #999;
      }

      /* 新增: 设备记录和价格明细样式 */
      .price-detail-list {
        margin-bottom: 20px;
      }
      .price-detail-item {
        display: flex;
        justify-content: space-between;
        padding: 8px 0;
        border-bottom: 1px solid #f0f0f0;
      }
      .price-detail-item.subtotal {
        font-weight: bold;
        border-bottom: 2px solid #eee;
      }
      .price-detail-item.discount {
        color: #ff4d4f;
      }
      .price-detail-item.total {
        font-weight: bold;
        font-size: 16px;
        border-bottom: none;
        padding-top: 15px;
      }

      /* 支付方式样式 */
      .payment-methods {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 15px;
        margin-bottom: 20px;
      }
      .payment-method-item {
        position: relative;
      }
      .payment-method-item input {
        position: absolute;
        opacity: 0;
      }
      .payment-method-item label {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 15px;
        border: 1px solid #ddd;
        border-radius: 8px;
        cursor: pointer;
      }
      .payment-method-item input:checked + label {
        border-color: #4d7cfe;
        background: #f0f5ff;
      }
      .payment-icon {
        width: 40px;
        height: 40px;
        border-radius: 8px;
        margin-bottom: 8px;
        display: flex;
        justify-content: center;
        align-items: center;
        color: white;
        font-size: 12px;
      }
      .payment-icon.wechat {
        background: #07c160;
      }
      .payment-icon.alipay {
        background: #1677ff;
      }
      .payment-icon.insurance {
        background: #ff9800;
      }
      .payment-icon.cash {
        background: #795548;
      }
      .payment-icon.installment {
        background: #673ab7;
      }

      /* 长期护理方案样式 */
      .long-term-plans {
        margin-bottom: 20px;
      }
      .plan-item {
        position: relative;
        margin-bottom: 15px;
      }
      .plan-item input {
        position: absolute;
        opacity: 0;
      }
      .plan-label {
        display: block;
        border: 1px solid #ddd;
        border-radius: 8px;
        padding: 15px;
        cursor: pointer;
      }
      .plan-item input:checked + .plan-label {
        border-color: #4d7cfe;
        background: #f0f5ff;
      }
      .plan-header {
        display: flex;
        justify-content: space-between;
        margin-bottom: 10px;
      }
      .plan-title {
        font-weight: bold;
      }
      .plan-price {
        color: #ff4d4f;
      }
      .plan-feature {
        font-size: 14px;
        color: #666;
        margin-bottom: 5px;
      }
      .plan-feature:before {
        content: "✓";
        color: #52c41a;
        margin-right: 5px;
      }

      /* 发票表单样式 */
      .invoice-form {
        margin-top: 10px;
      }
      .invoice-form input,
      .invoice-form select {
        border: 1px solid #ddd;
        border-radius: 4px;
        padding: 8px;
      }
    </style>
  </head>
  <body>
    <!-- 新增: 顶部导航菜单 -->
    <div class="nav-menu">
      <div class="nav-item" onclick="showScreen(0)">听单</div>
      <div class="nav-item" onclick="showScreen(1)">接单详情</div>
      <div class="nav-item" onclick="showScreen(2)">待上门</div>
      <div class="nav-item" onclick="showScreen(3)">服务评估</div>
      <div class="nav-item" onclick="showScreen(4)">确认方案</div>
      <div class="nav-item" onclick="showScreen(5)">服务记录</div>
      <div class="nav-item" onclick="showScreen(6)">确认服务</div>
      <div class="nav-item" onclick="showScreen(7)">收款</div>
    </div>

    <div id="toast" class="toast">提示信息</div>

    <!-- 界面1: 护士听单 -->
    <div class="screen-wrapper active" id="screen1">
      <div class="screen-title">界面1: 护士听单</div>
      <div class="screen">
        <div class="header">
          <span>新订单通知</span>
          <span class="badge">2</span>
        </div>
        <div class="content">
          <!-- 优化: 添加设备匹配状态标签 -->
          <div class="notice-bar">
            <i class="icon-info"></i>
            <span>今日已完成2/8单，还有3个任务需要准备</span>
          </div>

          <!-- 优化: 筛选条件更细化 -->
          <div class="filter-bar">
            <button class="filter-btn active">全部</button>
            <button class="filter-btn">产后护理</button>
            <button class="filter-btn">孕期监护</button>
            <button class="filter-btn">新生儿</button>
            <button class="filter-btn">附近5km</button>
          </div>

          <!-- 优化: 订单卡片添加设备匹配和技能匹配指示 -->
          <div class="card" id="order1" onclick="selectOrder(this)">
            <div class="skills-match-tag">技能匹配度: 98%</div>
            <div class="flex">
              <div>
                <h3>产后康复护理</h3>
                <div>
                  <span class="tag urgent">紧急 - 产后出血</span>
                  <span class="tag">产后7天</span>
                  <span class="tag">初产妇</span>
                </div>
              </div>
              <div>¥180</div>
            </div>
            <div class="item-row">
              <span>患者姓名</span>
              <span>张女士</span>
            </div>
            <div class="item-row">
              <span>服务地址</span>
              <span>海淀区xxxx小区 <span class="distance">3.2km</span></span>
            </div>
            <div class="item-row">
              <span>预约时间</span>
              <span>今天 14:30-15:30</span>
            </div>
            <div class="item-row">
              <span>需求描述</span>
              <span>产后伤口护理+母乳喂养指导</span>
            </div>
            <div class="item-row">
              <span>设备需求</span>
              <span>产后康复仪+乳腺按摩仪</span>
              <span class="equipment-status complete">设备齐全</span>
            </div>
          </div>

          <div class="card">
            <div class="skills-match-tag">技能匹配度: 85%</div>
            <div class="flex">
              <div>
                <h3>孕期监护</h3>
                <div>
                  <span class="tag">孕36周</span>
                  <span class="tag">高危孕妇</span>
                </div>
              </div>
              <div>¥220</div>
            </div>
            <div class="item-row">
              <span>患者姓名</span>
              <span>李女士</span>
            </div>
            <div class="item-row">
              <span>服务地址</span>
              <span>朝阳区xxxx小区 <span class="distance">7.8km</span></span>
            </div>
            <div class="item-row">
              <span>预约时间</span>
              <span>今天 16:00-17:00</span>
            </div>
            <div class="item-row">
              <span>需求描述</span>
              <span>胎心监测+血压监测</span>
            </div>
            <div class="item-row">
              <span>设备需求</span>
              <span>胎心监护仪+血压计</span>
              <span class="equipment-status incomplete">需申领</span>
            </div>
            <button class="btn" onclick="showScreen(1)">查看详情</button>
          </div>
        </div>
      </div>
    </div>

    <!-- 界面2: 接单详情 -->
    <div class="screen-wrapper" id="screen2">
      <div class="screen-title">界面2: 接单详情</div>
      <div class="screen">
        <div class="header">
          <div class="back" onclick="showScreen(0)">←</div>
          <span>订单详情</span>
        </div>
        <div class="content">
          <!-- 优化: 添加患者关键医疗信息和特殊注意事项 -->
          <div class="card">
            <h3>患者信息</h3>
            <div class="flex">
              <div class="avatar">头像</div>
              <div>
                <div>张女士 | 28岁 | 初产妇</div>
                <div>预产期：已产（产后7天）</div>
                <div>分娩方式：顺产</div>
              </div>
            </div>
            <div class="item-row" style="margin-top: 10px">
              <span>过敏史</span>
              <span class="info-value warning">青霉素过敏</span>
            </div>
            <div class="item-row">
              <span>既往病史</span>
              <span>无</span>
            </div>
            <div class="item-row">
              <span>当前用药</span>
              <span>产后恢复中药</span>
            </div>
            <div class="item-row special-note">
              <span>特殊注意</span>
              <span class="info-value warning">乳房敏感，需轻柔操作</span>
            </div>
            <button class="btn secondary" onclick="showPatientProfile()">
              查看完整病历
            </button>
          </div>

          <!-- 优化: 详细订单信息 -->
          <div class="card">
            <h3>订单信息</h3>
            <div class="item-row">
              <span>订单编号</span>
              <span>SN20231115001</span>
            </div>
            <div class="item-row">
              <span>服务类型</span>
              <span>产后康复护理</span>
            </div>
            <div class="item-row">
              <span>服务需求</span>
              <span>伤口护理、母乳喂养指导、设备使用培训</span>
            </div>
            <div class="item-row">
              <span>设备需求</span>
              <span>产后康复仪、乳腺按摩仪</span>
            </div>
            <div class="item-row">
              <span>医嘱信息</span>
              <span>每日2次伤口换药，使用无菌盐水清洗</span>
            </div>
            <div class="item-row">
              <span>预约时间</span>
              <span>2023-11-15 14:30</span>
            </div>
            <div class="item-row">
              <span>预计服务时长</span>
              <span>60分钟</span>
            </div>
          </div>

          <!-- 优化: 地址详情 -->
          <div class="card">
            <h3>地址信息</h3>
            <div class="item-row">
              <span>详细地址</span>
              <span>海淀区xx路xx号xx小区x号楼x单元xxx室</span>
            </div>
            <div class="item-row">
              <span>门禁信息</span>
              <span>小区门禁：1234，楼门：5678</span>
            </div>
            <div class="item-row">
              <span>家庭环境</span>
              <span>三室一厅，主卧有足够设备放置空间</span>
            </div>
            <div class="item-row">
              <span>停车信息</span>
              <span>小区地下停车场有收费访客车位</span>
            </div>
          </div>

          <!-- 优化: 设备准备提醒 -->
          <div class="card">
            <h3>设备准备</h3>
            <div class="checklist-preview">
              <div class="item-row">
                <span>产后康复仪</span>
                <span class="equipment-status complete">已准备</span>
              </div>
              <div class="item-row">
                <span>乳腺按摩仪</span>
                <span class="equipment-status complete">已准备</span>
              </div>
              <div class="item-row">
                <span>必备耗材</span>
                <span class="equipment-status incomplete">需检查</span>
              </div>
            </div>
            <button class="btn secondary" onclick="showChecklistPopup()">
              查看完整清单
            </button>
          </div>

          <div class="btn-group">
            <button class="btn success" onclick="showScreen(2)">
              接受订单
            </button>
            <button class="btn secondary">拒绝接单</button>
          </div>
        </div>
      </div>
    </div>

    <!-- 界面3: 待上门途中 -->
    <div class="screen-wrapper" id="screen3">
      <div class="screen-title">界面3: 待上门途中</div>
      <div class="screen">
        <div class="header">
          <div class="back" onclick="showScreen(1)">←</div>
          <span>准备出发</span>
        </div>
        <div class="content">
          <!-- 优化: 出发前准备确认 -->
          <div class="card">
            <h3>出发前确认</h3>
            <div class="checklist-preview">
              <div class="item-row">
                <span>设备齐全</span>
                <input type="checkbox" checked />
              </div>
              <div class="item-row">
                <span>耗材充足</span>
                <input type="checkbox" checked />
              </div>
              <div class="item-row">
                <span>患者状态确认</span>
                <input type="checkbox" checked />
              </div>
              <div class="item-row">
                <span>充电电量</span>
                <input type="checkbox" checked />
              </div>
            </div>
          </div>

          <!-- 优化: 患者当前状态 -->
          <div class="card">
            <h3>患者当前状态</h3>
            <div class="item-row">
              <span>最近状态</span>
              <span>稳定，无特殊不适（15分钟前更新）</span>
            </div>
            <div class="item-row">
              <span>体温</span>
              <span>36.5℃（今早自测）</span>
            </div>
            <div class="item-row">
              <span>特殊需求</span>
              <span>希望提供母乳喂养建议</span>
            </div>
            <button class="btn secondary">联系患者</button>
          </div>

          <!-- 优化: 路线信息 -->
          <div class="card">
            <h3>路线信息</h3>
            <div class="item-row">
              <span>预计时间</span>
              <span>约25分钟（3.2公里）</span>
            </div>
            <div class="item-row">
              <span>建议路线</span>
              <span>海淀路 → 中关村大街 → xx路</span>
            </div>
            <div
              style="
                height: 120px;
                background-color: #eee;
                margin: 10px 0;
                display: flex;
                align-items: center;
                justify-content: center;
              "
            >
              地图视图
            </div>
            <button class="btn secondary">导航前往</button>
          </div>

          <!-- 优化: 出发按钮 -->
          <button class="btn success" onclick="showScreen(3)">确认出发</button>
        </div>
      </div>
    </div>

    <!-- 界面4: 服务评估 -->
    <div class="screen-wrapper" id="screen4">
      <div class="screen-title">界面4: 服务评估</div>
      <div class="screen">
        <div class="header">
          <div class="back" onclick="showScreen(2)">←</div>
          <span>服务评估</span>
          <div class="right" onclick="showEmergencyPopup()">紧急</div>
        </div>
        <div class="content">
          <!-- 优化: 孕产妇专业评估 -->
          <div class="card">
            <h3>孕产妇评估</h3>
            <div class="item-row">
              <span>体温</span>
              <input
                type="text"
                placeholder="℃"
                style="width: 60px; padding: 5px"
              />
            </div>
            <div class="item-row">
              <span>血压</span>
              <input
                type="text"
                placeholder="mmHg"
                style="width: 80px; padding: 5px"
              />
            </div>
            <div class="item-row">
              <span>脉搏</span>
              <input
                type="text"
                placeholder="次/分"
                style="width: 80px; padding: 5px"
              />
            </div>
            <div class="item-row">
              <span>呼吸</span>
              <input
                type="text"
                placeholder="次/分"
                style="width: 80px; padding: 5px"
              />
            </div>
            <div class="item-row">
              <span>血氧</span>
              <input
                type="text"
                placeholder="%"
                style="width: 60px; padding: 5px"
              />
            </div>
            <div class="item-row">
              <span>体重</span>
              <input
                type="text"
                placeholder="kg"
                style="width: 60px; padding: 5px"
              />
            </div>
          </div>

          <!-- 优化: 产后特殊评估 -->
          <div class="card">
            <h3>专项评估</h3>
            <div class="item-row">
              <span>恶露状态</span>
              <select style="width: 120px">
                <option>正常</option>
                <option>少量异常</option>
                <option>大量异常</option>
              </select>
            </div>
            <div class="item-row">
              <span>子宫收缩</span>
              <select style="width: 120px">
                <option>良好</option>
                <option>一般</option>
                <option>不佳</option>
              </select>
            </div>
            <div class="item-row">
              <span>会阴伤口</span>
              <select style="width: 120px">
                <option>愈合良好</option>
                <option>轻度红肿</option>
                <option selected>有渗出</option>
                <option>明显感染</option>
              </select>
            </div>
            <div class="item-row">
              <span>乳房状态</span>
              <select style="width: 120px">
                <option>正常</option>
                <option selected>轻度胀痛</option>
                <option>乳腺管阻塞</option>
                <option>乳腺炎症状</option>
              </select>
            </div>
            <div class="item-row">
              <span>乳头状态</span>
              <select style="width: 120px">
                <option>正常</option>
                <option selected>轻度皲裂</option>
                <option>严重皲裂</option>
                <option>有出血</option>
              </select>
            </div>
          </div>

          <!-- 优化: 情绪与睡眠评估 -->
          <div class="card">
            <h3>情绪与睡眠评估</h3>
            <div class="item-row">
              <span>情绪状态</span>
              <select style="width: 120px">
                <option>良好</option>
                <option selected>轻度焦虑</option>
                <option>明显焦虑</option>
                <option>抑郁表现</option>
              </select>
            </div>
            <div class="item-row">
              <span>睡眠质量</span>
              <select style="width: 120px">
                <option>良好</option>
                <option selected>一般</option>
                <option>差</option>
              </select>
            </div>
            <div class="item-row">
              <span>EPDS评分</span>
              <input
                type="text"
                placeholder="0-30"
                style="width: 60px; padding: 5px"
                value="9"
              />
              <span class="warning-text">轻度风险</span>
            </div>
          </div>

          <!-- 优化: 异常情况记录 -->
          <div class="card">
            <h3>异常情况记录</h3>
            <div class="checklist-item">
              <input type="checkbox" id="issue1" checked />
              <label for="issue1">伤口愈合不良</label>
            </div>
            <div class="checklist-item">
              <input type="checkbox" id="issue2" checked />
              <label for="issue2">乳头皲裂</label>
            </div>
            <div class="checklist-item">
              <input type="checkbox" id="issue3" />
              <label for="issue3">产后出血</label>
            </div>
            <div class="checklist-item">
              <input type="checkbox" id="issue4" />
              <label for="issue4">高热</label>
            </div>
            <div class="checklist-item">
              <input type="checkbox" id="issue5" checked />
              <label for="issue5">情绪波动</label>
            </div>
            <div class="item-row">
              <span>其他异常</span>
              <textarea
                placeholder="请描述其他异常情况"
                rows="2"
                style="width: 100%"
              ></textarea>
            </div>
          </div>

          <!-- 优化: 评估照片上传 -->
          <div class="card">
            <h3>评估照片上传</h3>
            <div class="photo-upload">
              <div class="photo-item">
                <div class="photo-preview">+</div>
                <div>伤口照片</div>
              </div>
              <div class="photo-item">
                <div class="photo-preview">+</div>
                <div>乳房照片</div>
              </div>
              <div class="photo-item">
                <div class="photo-preview">+</div>
                <div>其他照片</div>
              </div>
            </div>
          </div>

          <!-- 优化: 风险评估 -->
          <div class="card">
            <h3>风险评估</h3>
            <div class="risk-summary">
              <div class="risk-item medium">
                <div class="risk-label">伤口感染风险</div>
                <div class="risk-value">中度</div>
              </div>
              <div class="risk-item low">
                <div class="risk-label">产后出血风险</div>
                <div class="risk-value">低</div>
              </div>
              <div class="risk-item medium">
                <div class="risk-label">产后抑郁风险</div>
                <div class="risk-value">中度</div>
              </div>
              <div class="risk-item high">
                <div class="risk-label">母乳喂养困难</div>
                <div class="risk-value">高</div>
              </div>
            </div>
          </div>

          <!-- 优化: 评估结论 -->
          <div class="card">
            <h3>评估总结</h3>
            <textarea
              rows="3"
              placeholder="请输入评估总结"
              style="width: 100%; padding: 8px"
            >
产后恢复总体良好，乳头皲裂需特别护理，存在轻度焦虑情绪，建议增加心理支持。需重点指导母乳喂养技巧。</textarea
            >
          </div>

          <!-- 优化: 远程会诊按钮 -->
          <div class="action-buttons">
            <button class="btn secondary" onclick="requestRemoteConsultation()">
              请求远程会诊
            </button>
            <button class="btn success" onclick="showScreen(4)">
              完成评估
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- 界面5: 确认服务方案 -->
    <div class="screen-wrapper" id="screen5">
      <div class="screen-title">界面5: 确认服务方案</div>
      <div class="screen">
        <div class="header">
          <div class="back" onclick="showScreen(3)">←</div>
          <span>确认服务方案</span>
          <div class="right" onclick="showEmergencyPopup()">紧急</div>
        </div>
        <div class="content">
          <!-- 优化: 评估结果摘要 -->
          <div class="assessment-summary">
            <h3>评估结果摘要</h3>
            <div class="summary-item normal">
              <i class="icon-circle"></i>
              <span>基础生命体征正常</span>
            </div>
            <div class="summary-item warning">
              <i class="icon-warning"></i>
              <span>乳头有轻微皲裂，需特别护理</span>
            </div>
            <div class="summary-item warning">
              <i class="icon-warning"></i>
              <span>情绪状态略显焦虑，需心理支持</span>
            </div>
          </div>

          <!-- 优化: 环境评估结果 -->
          <div class="card">
            <h3>环境评估</h3>
            <div class="item-row">
              <span>室内环境</span>
              <span class="status-text good">适合</span>
            </div>
            <div class="item-row">
              <span>卫生条件</span>
              <span class="status-text good">良好</span>
            </div>
            <div class="item-row">
              <span>设备放置空间</span>
              <span class="status-text good">充足</span>
            </div>
            <div class="item-row">
              <span>电源条件</span>
              <span class="status-text warning">需配置插线板</span>
            </div>
          </div>

          <!-- 优化: 个性化护理方案 -->
          <div class="card">
            <h3>个性化护理方案</h3>
            <div class="sop-step">
              <div class="step-header">
                <b>1. 伤口护理</b> - 20分钟
                <span class="required-tag">必需</span>
              </div>
              <div>清洗伤口，更换敷料，观察伤口恢复情况</div>
              <ul class="step-details">
                <li>使用无菌生理盐水冲洗</li>
                <li>检查是否有感染迹象</li>
                <li>涂抹医嘱指定的药膏</li>
              </ul>
            </div>
            <div class="sop-step">
              <div class="step-header">
                <b>2. 乳房护理</b> - 15分钟
                <span class="required-tag">必需</span>
              </div>
              <div>使用乳腺按摩仪缓解乳房胀痛，疏通乳腺管</div>
              <ul class="step-details">
                <li>乳头皲裂使用特殊护理产品</li>
                <li>指导正确的按摩手法</li>
              </ul>
            </div>
            <div class="sop-step">
              <div class="step-header">
                <b>3. 母乳喂养指导</b> - 15分钟
                <span class="required-tag">必需</span>
              </div>
              <div>正确的哺乳姿势指导，解决喂养困难</div>
            </div>
            <div class="sop-step">
              <div class="step-header">
                <b>4. 设备使用培训</b> - 10分钟
                <span class="required-tag">必需</span>
              </div>
              <div>产后康复仪使用方法指导和注意事项</div>
            </div>
            <div class="sop-step">
              <div class="step-header">
                <b>5. 情绪疏导</b> - 10分钟
                <span class="tag">推荐</span>
              </div>
              <div>产后情绪疏导与心理支持</div>
            </div>
          </div>

          <!-- 优化: 设备放置方案 -->
          <div class="card">
            <h3>设备放置方案</h3>
            <div class="item-row">
              <span>产后康复仪</span>
              <span>主卧，靠近床尾</span>
            </div>
            <div class="item-row">
              <span>乳腺按摩仪</span>
              <span>主卧，床头柜</span>
            </div>
            <div class="item-row">
              <span>远程监护设备</span>
              <span>主卧，靠近电源插座</span>
            </div>
            <textarea
              rows="2"
              placeholder="添加设备放置备注"
              style="width: 100%; margin-top: 10px; padding: 8px"
            >
所有设备已消毒，摆放位置已与家属确认，已教会患者基本使用方法。</textarea
            >
          </div>

          <!-- 优化: 价格明细 -->
          <div class="card">
            <h3>服务与设备费用</h3>
            <div class="item-row">
              <span>基础服务费</span>
              <span>¥180</span>
            </div>
            <div class="item-row">
              <span>设备租用费(7天)</span>
              <span>¥65</span>
            </div>
            <div class="item-row total">
              <span>总计</span>
              <span>¥245</span>
            </div>
            <div class="item-row discount">
              <span>首次服务优惠</span>
              <span>-¥65</span>
            </div>
            <div class="item-row final">
              <span>实付金额</span>
              <span>¥180</span>
            </div>
            <button
              class="btn secondary"
              onclick="showPopup('price-detail-popup')"
            >
              查看费用明细
            </button>
          </div>

          <!-- 优化: 服务知情同意 -->
          <div class="card">
            <h3>服务知情同意</h3>
            <div class="consent-item">
              <input type="checkbox" id="consent1" checked />
              <label for="consent1">我已向患者说明服务内容和注意事项</label>
            </div>
            <div class="consent-item">
              <input type="checkbox" id="consent2" checked />
              <label for="consent2">患者已了解并同意设备放置方案</label>
            </div>
            <div class="consent-item">
              <input type="checkbox" id="consent3" checked />
              <label for="consent3">患者已了解费用明细和支付方式</label>
            </div>
            <div class="consent-item">
              <input type="checkbox" id="consent4" checked />
              <label for="consent4">已告知患者可能的风险和应对措施</label>
            </div>
          </div>

          <button class="btn success" onclick="showScreen(5)">
            确认方案并开始服务
          </button>
        </div>
      </div>
    </div>

    <!-- 界面6: 服务操作记录 -->
    <div class="screen-wrapper" id="screen6">
      <div class="screen-title">界面6: 服务操作记录</div>
      <div class="screen">
        <div class="header">
          <div class="back" onclick="showScreen(4)">←</div>
          <span>服务操作记录</span>
          <div class="right" onclick="showEmergencyPopup()">紧急</div>
        </div>
        <div class="content">
          <!-- 优化: 进度检查 -->
          <div class="progress-check">
            <div class="progress-step completed">
              <div class="step-dot"></div>
              <div class="step-label">伤口护理</div>
            </div>
            <div class="progress-step completed">
              <div class="step-dot"></div>
              <div class="step-label">乳房护理</div>
            </div>
            <div class="progress-step active">
              <div class="step-dot"></div>
              <div class="step-label">喂养指导</div>
            </div>
            <div class="progress-step">
              <div class="step-dot"></div>
              <div class="step-label">设备培训</div>
            </div>
            <div class="progress-step">
              <div class="step-dot"></div>
              <div class="step-label">情绪疏导</div>
            </div>
          </div>

          <!-- 优化: 当前步骤详情 -->
          <div class="card">
            <h3>母乳喂养指导</h3>
            <div class="time-info">开始时间: 15:05 | 当前用时: 8分钟</div>
            <div class="step-details">
              <div class="detail-item">
                <div class="detail-title">抱姿纠正</div>
                <div class="detail-action">
                  <input type="checkbox" checked /> 完成
                  <button class="btn small">拍照记录</button>
                </div>
              </div>
              <div class="detail-item">
                <div class="detail-title">含接指导</div>
                <div class="detail-action">
                  <input type="checkbox" checked /> 完成
                  <button class="btn small">拍照记录</button>
                </div>
              </div>
              <div class="detail-item">
                <div class="detail-title">吸吮评估</div>
                <div class="detail-action">
                  <input type="checkbox" /> 完成
                  <button class="btn small">拍照记录</button>
                </div>
              </div>
              <div class="detail-item">
                <div class="detail-title">哺乳频率建议</div>
                <div class="detail-action"><input type="checkbox" /> 完成</div>
              </div>
            </div>
            <div class="step-note">
              <textarea
                rows="2"
                placeholder="添加操作备注"
                style="width: 100%; padding: 8px"
              >
产妇掌握了基本抱姿，含接需继续练习，已讲解掌握要点，宝宝吸吮力一般。</textarea
              >
            </div>
          </div>

          <!-- 优化: 设备使用记录 -->
          <div class="card">
            <h3>设备使用记录</h3>
            <div class="equipment-usage">
              <div class="equipment-item">
                <div class="equipment-name">乳腺按摩仪</div>
                <div class="equipment-status">
                  <span class="status-tag good">运行正常</span>
                </div>
                <div class="usage-record">
                  <div class="usage-time">使用时间: 12分钟</div>
                  <div class="usage-note">强度调整至2档，患者感觉舒适</div>
                  <div class="usage-photos">
                    <button class="btn small">添加照片</button>
                  </div>
                </div>
              </div>
              <div class="equipment-item">
                <div class="equipment-name">产后康复仪</div>
                <div class="equipment-status">
                  <span class="status-tag good">运行正常</span>
                </div>
                <div class="usage-record">
                  <div class="usage-time">使用时间: 0分钟</div>
                  <div class="usage-note">计划下一步使用</div>
                </div>
              </div>
            </div>
          </div>

          <!-- 优化: 异常处理记录 -->
          <div class="card">
            <h3>异常处理记录</h3>
            <div class="abnormal-record">
              <div class="abnormal-item">
                <div class="abnormal-title">
                  <span>乳头皲裂处理</span>
                  <span class="abnormal-time">14:50</span>
                </div>
                <div class="abnormal-content">
                  使用乳头修复霜，告知患者正确使用方法，2小时后观察
                </div>
              </div>
              <button class="btn secondary">添加异常记录</button>
            </div>
          </div>

          <!-- 优化: 健康教育记录 -->
          <div class="card">
            <h3>健康教育记录</h3>
            <div class="education-checklist">
              <div class="education-item">
                <input type="checkbox" checked id="edu1" />
                <label for="edu1">伤口护理注意事项</label>
              </div>
              <div class="education-item">
                <input type="checkbox" checked id="edu2" />
                <label for="edu2">乳头保护方法</label>
              </div>
              <div class="education-item">
                <input type="checkbox" id="edu3" />
                <label for="edu3">新生儿护理要点</label>
              </div>
              <div class="education-item">
                <input type="checkbox" id="edu4" />
                <label for="edu4">产后恢复运动指导</label>
              </div>
              <div class="education-item">
                <input type="checkbox" id="edu5" />
                <label for="edu5">产后营养建议</label>
              </div>
            </div>
            <div class="education-materials">
              <button class="btn secondary">发送电子资料</button>
            </div>
          </div>

          <button class="btn success" onclick="showScreen(6)">
            完成服务记录
          </button>
        </div>
      </div>
    </div>

    <!-- 界面7: 确认服务 -->
    <div class="screen-wrapper" id="screen7">
      <div class="screen-title">界面7: 确认服务</div>
      <div class="screen">
        <div class="header">
          <div class="back" onclick="showScreen(5)">←</div>
          <span>确认服务完成</span>
        </div>
        <div class="content">
          <!-- 优化: 服务完成摘要 -->
          <div class="card">
            <h3>服务完成摘要</h3>
            <div class="service-summary">
              <div class="summary-stat">
                <div class="stat-value">5/5</div>
                <div class="stat-label">完成项目</div>
              </div>
              <div class="summary-stat">
                <div class="stat-value">70分钟</div>
                <div class="stat-label">服务时长</div>
              </div>
              <div class="summary-stat">
                <div class="stat-value">2项</div>
                <div class="stat-label">设备安装</div>
              </div>
            </div>
          </div>

          <!-- 优化: 效果评估 -->
          <div class="card">
            <h3>服务效果评估</h3>
            <div class="effect-item">
              <div class="effect-label">伤口护理</div>
              <div class="effect-rating">
                <span class="star active">★</span>
                <span class="star active">★</span>
                <span class="star active">★</span>
                <span class="star active">★</span>
                <span class="star">★</span>
              </div>
            </div>
            <div class="effect-item">
              <div class="effect-label">乳房护理</div>
              <div class="effect-rating">
                <span class="star active">★</span>
                <span class="star active">★</span>
                <span class="star active">★</span>
                <span class="star">★</span>
                <span class="star">★</span>
              </div>
            </div>
            <div class="effect-item">
              <div class="effect-label">母乳喂养指导</div>
              <div class="effect-rating">
                <span class="star active">★</span>
                <span class="star active">★</span>
                <span class="star active">★</span>
                <span class="star active">★</span>
                <span class="star">★</span>
              </div>
            </div>
            <div class="effect-item">
              <div class="effect-label">设备使用培训</div>
              <div class="effect-rating">
                <span class="star active">★</span>
                <span class="star active">★</span>
                <span class="star active">★</span>
                <span class="star">★</span>
                <span class="star">★</span>
              </div>
            </div>
            <div class="effect-item">
              <div class="effect-label">情绪疏导</div>
              <div class="effect-rating">
                <span class="star active">★</span>
                <span class="star active">★</span>
                <span class="star active">★</span>
                <span class="star active">★</span>
                <span class="star">★</span>
              </div>
            </div>
            <div class="effect-note">
              <textarea
                rows="2"
                placeholder="服务效果总结"
                style="width: 100%; padding: 8px"
              >
伤口护理效果良好，乳房胀痛有所缓解，母乳喂养姿势和含接情况改善明显，患者情绪转好。</textarea
              >
            </div>
          </div>

          <!-- 优化: 远程监护设置 -->
          <div class="card">
            <h3>远程监护设置</h3>
            <div class="remote-monitor-settings">
              <div class="monitor-item">
                <div class="monitor-label">健康数据监测</div>
                <div class="monitor-setting">
                  <input type="checkbox" checked /> 已设置
                </div>
              </div>
              <div class="monitor-item">
                <div class="monitor-label">数据上传频率</div>
                <div class="monitor-setting">
                  <select>
                    <option>每12小时</option>
                    <option selected>每6小时</option>
                    <option>每小时</option>
                  </select>
                </div>
              </div>
              <div class="monitor-item">
                <div class="monitor-label">异常提醒阈值</div>
                <div class="monitor-setting">
                  <select>
                    <option>严格</option>
                    <option selected>标准</option>
                    <option>宽松</option>
                  </select>
                </div>
              </div>
              <div class="monitor-item">
                <div class="monitor-label">远程控制授权</div>
                <div class="monitor-setting">
                  <input type="checkbox" checked /> 已授权
                </div>
              </div>
            </div>
          </div>

          <!-- 优化: 下次服务预约 -->
          <div class="card">
            <h3>下次服务预约</h3>
            <div class="next-appointment">
              <div class="item-row">
                <span>预约日期</span>
                <input type="date" value="2023-11-12" />
              </div>
              <div class="item-row">
                <span>预约时间</span>
                <select>
                  <option>上午 9:00-11:00</option>
                  <option selected>下午 14:00-16:00</option>
                  <option>晚上 19:00-21:00</option>
                </select>
              </div>
              <div class="item-row">
                <span>服务项目</span>
                <select>
                  <option>全套产后护理</option>
                  <option selected>母乳喂养指导</option>
                  <option>产后恢复评估</option>
                </select>
              </div>
            </div>
          </div>

          <!-- 优化: 患者反馈 -->
          <div class="card">
            <h3>患者反馈</h3>
            <div class="feedback-stars">
              <span class="star active">★</span>
              <span class="star active">★</span>
              <span class="star active">★</span>
              <span class="star active">★</span>
              <span class="star active">★</span>
              <span>非常满意</span>
            </div>
            <div class="feedback-comment">
              "护士非常专业，我的乳房胀痛情况得到很大缓解，孩子吃奶也顺畅多了，谢谢！"
            </div>
          </div>

          <!-- 优化: 确认按钮 -->
          <button class="btn success" onclick="showScreen(7)">
            确认服务完成并结算
          </button>
        </div>
      </div>
    </div>

    <!-- 界面8: 发起收款 -->
    <div class="screen-wrapper" id="screen8">
      <div class="screen-title">界面8: 发起收款</div>
      <div class="screen">
        <div class="header">
          <div class="back" onclick="showScreen(6)">←</div>
          <span>服务结算</span>
        </div>
        <div class="content">
          <!-- 优化: 服务账单 -->
          <div class="card">
            <h3>服务账单</h3>
            <div class="bill-summary">
              <div class="bill-item">
                <span>基础服务费</span>
                <span>¥180</span>
              </div>
              <div class="bill-item">
                <span>设备租用费(7天)</span>
                <span>¥65</span>
              </div>
              <div class="bill-item">
                <span>耗材费用</span>
                <span>¥30</span>
              </div>
              <div class="bill-item">
                <span>交通费</span>
                <span>¥15</span>
              </div>
              <div class="bill-item subtotal">
                <span>小计</span>
                <span>¥290</span>
              </div>
              <div class="bill-item discount">
                <span>首次服务优惠</span>
                <span>-¥80</span>
              </div>
              <div class="bill-item discount">
                <span>会员折扣 (10%)</span>
                <span>-¥30</span>
              </div>
              <div class="bill-item total">
                <span>应付金额</span>
                <span>¥180</span>
              </div>
            </div>
            <button
              class="btn secondary"
              onclick="showPopup('payment-method-popup')"
            >
              选择支付方式
            </button>
          </div>

          <!-- 优化: 增值服务推荐 -->
          <div class="card">
            <h3>个性化增值服务</h3>
            <div class="upsell-items">
              <div class="upsell-item">
                <div class="upsell-info">
                  <h4>产后营养餐配送</h4>
                  <p>根据产妇体质定制的营养餐，促进恢复和泌乳</p>
                </div>
                <div class="upsell-price">
                  <div>¥198/天</div>
                  <button class="btn small">了解详情</button>
                </div>
              </div>
              <div class="upsell-item recommended">
                <div class="upsell-info">
                  <h4>乳腺疏通特惠套餐</h4>
                  <p>3次专业乳腺疏通服务，解决乳腺堵塞问题</p>
                  <div class="recommend-tag">推荐</div>
                </div>
                <div class="upsell-price">
                  <div>¥596</div>
                  <button class="btn small primary">加入订单</button>
                </div>
              </div>
              <div class="upsell-item">
                <div class="upsell-info">
                  <h4>产后康复仪延长租用</h4>
                  <p>延长租期至30天，支持全面康复</p>
                </div>
                <div class="upsell-price">
                  <div>¥288</div>
                  <button class="btn small">了解详情</button>
                </div>
              </div>
            </div>
          </div>

          <!-- 优化: 后续护理方案 -->
          <div class="card">
            <h3>长期护理方案</h3>
            <div class="care-plans">
              <div class="plan-item">
                <input type="radio" name="plan" id="plan1" checked />
                <label for="plan1" class="plan-label">
                  <div class="plan-header">
                    <div class="plan-title">基础方案</div>
                    <div class="plan-price">¥1980/月</div>
                  </div>
                  <div class="plan-features">
                    <div class="plan-feature">每周1次上门护理</div>
                    <div class="plan-feature">远程健康监测</div>
                    <div class="plan-feature">24小时咨询服务</div>
                  </div>
                </label>
              </div>
              <div class="plan-item">
                <input type="radio" name="plan" id="plan2" />
                <label for="plan2" class="plan-label recommended">
                  <div class="plan-header">
                    <div class="plan-title">标准方案</div>
                    <div class="plan-price">¥3980/月</div>
                  </div>
                  <div class="plan-features">
                    <div class="plan-feature">每周2次上门护理</div>
                    <div class="plan-feature">高级远程监护</div>
                    <div class="plan-feature">优先预约服务</div>
                    <div class="plan-feature">免费设备租用</div>
                  </div>
                </label>
              </div>
              <div class="plan-item">
                <input type="radio" name="plan" id="plan3" />
                <label for="plan3" class="plan-label">
                  <div class="plan-header">
                    <div class="plan-title">高级方案</div>
                    <div class="plan-price">¥7980/月</div>
                  </div>
                  <div class="plan-features">
                    <div class="plan-feature">每周3次上门护理</div>
                    <div class="plan-feature">24小时专属远程监护</div>
                    <div class="plan-feature">高级设备使用</div>
                    <div class="plan-feature">每日营养餐配送</div>
                    <div class="plan-feature">每周1次中医调理</div>
                  </div>
                </label>
              </div>
            </div>
            <button class="btn secondary" style="margin-top: 10px">
              查看方案详情
            </button>
          </div>

          <!-- 优化: 电子发票申请 -->
          <div class="card">
            <h3>电子发票</h3>
            <div class="item-row">
              <span>是否需要发票</span>
              <div>
                <label style="margin-right: 10px"
                  ><input type="radio" name="invoice" checked /> 是</label
                >
                <label><input type="radio" name="invoice" /> 否</label>
              </div>
            </div>
            <div class="invoice-form">
              <div class="item-row">
                <span>发票抬头</span>
                <input
                  type="text"
                  placeholder="请输入发票抬头"
                  style="width: 100%"
                />
              </div>
              <div class="item-row">
                <span>发票类型</span>
                <select style="width: 100%">
                  <option>个人</option>
                  <option>企业</option>
                </select>
              </div>
              <div class="item-row">
                <span>税号(企业)</span>
                <input type="text" placeholder="企业税号" style="width: 100%" />
              </div>
              <div class="item-row">
                <span>接收邮箱</span>
                <input
                  type="email"
                  placeholder="接收电子发票的邮箱"
                  style="width: 100%"
                />
              </div>
            </div>
          </div>

          <!-- 优化: 收款码 -->
          <div class="card">
            <h3>收款码</h3>
            <div style="text-align: center; margin: 15px 0">
              <div
                style="
                  width: 150px;
                  height: 150px;
                  background-color: #eee;
                  margin: 0 auto;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                "
              >
                二维码图片
              </div>
              <p>请患者扫码支付</p>
            </div>
          </div>

          <button class="btn success" onclick="completeProcess()">
            确认已收款
          </button>
        </div>
      </div>
    </div>

    <!-- 弹窗组件 -->
    <!-- 优化: 患者档案弹窗 -->
    <div class="overlay" id="patient-profile-overlay"></div>
    <div class="popup large-popup" id="patient-profile-popup">
      <h3>患者完整档案</h3>
      <div class="profile-tabs">
        <div class="tab active">基本信息</div>
        <div class="tab">医疗史</div>
        <div class="tab">产检记录</div>
        <div class="tab">分娩记录</div>
      </div>
      <div class="profile-section">
        <h4>基本资料</h4>
        <div class="item-row">
          <span>姓名</span>
          <span>张女士</span>
        </div>
        <div class="item-row">
          <span>年龄</span>
          <span>28岁</span>
        </div>
        <div class="item-row">
          <span>身高/体重</span>
          <span>165cm / 68kg (产前62kg)</span>
        </div>
        <div class="item-row">
          <span>血型</span>
          <span>A型 Rh(+)</span>
        </div>
        <div class="item-row">
          <span>职业</span>
          <span>IT工程师 (产假中)</span>
        </div>
        <div class="item-row">
          <span>紧急联系人</span>
          <span>张先生 (丈夫) 13800138000</span>
        </div>
      </div>
      <div class="profile-section">
        <h4>孕产信息</h4>
        <div class="item-row">
          <span>孕产史</span>
          <span>1-0-0-1 (初产妇)</span>
        </div>
        <div class="item-row">
          <span>预产期</span>
          <span>2023-11-08 (已产)</span>
        </div>
        <div class="item-row">
          <span>产程时长</span>
          <span>15小时</span>
        </div>
        <div class="item-row">
          <span>分娩方式</span>
          <span>自然分娩 (会阴侧切)</span>
        </div>
        <div class="item-row">
          <span>分娩日期</span>
          <span>2023-11-08 23:45</span>
        </div>
        <div class="item-row">
          <span>出院日期</span>
          <span>2023-11-11</span>
        </div>
      </div>
      <div class="profile-section">
        <h4>医疗信息</h4>
        <div class="item-row warning">
          <span>过敏史</span>
          <span>青霉素过敏 (皮疹、瘙痒)</span>
        </div>
        <div class="item-row">
          <span>既往病史</span>
          <span>无慢性疾病</span>
        </div>
        <div class="item-row">
          <span>家族病史</span>
          <span>母亲有甲状腺疾病</span>
        </div>
        <div class="item-row">
          <span>产前检查</span>
          <span>正常，无异常</span>
        </div>
        <div class="item-row">
          <span>妊娠期并发症</span>
          <span>妊娠期贫血 (轻度)</span>
        </div>
        <div class="item-row">
          <span>当前用药</span>
          <span>铁剂补充、中药调理</span>
        </div>
      </div>
      <div class="profile-section">
        <h4>新生儿信息</h4>
        <div class="item-row">
          <span>性别</span>
          <span>女</span>
        </div>
        <div class="item-row">
          <span>出生体重</span>
          <span>3.25kg</span>
        </div>
        <div class="item-row">
          <span>Apgar评分</span>
          <span>1分钟9分，5分钟10分</span>
        </div>
        <div class="item-row">
          <span>喂养方式</span>
          <span>母乳喂养 (有吸吮困难)</span>
        </div>
      </div>
      <div class="profile-section">
        <h4>特殊注意事项</h4>
        <div class="special-notes">
          <div class="special-note-item warning">
            <i class="icon-warning"></i>
            <div>会阴伤口疼痛明显，活动受限</div>
          </div>
          <div class="special-note-item warning">
            <i class="icon-warning"></i>
            <div>乳头有皲裂，需轻柔操作</div>
          </div>
          <div class="special-note-item warning">
            <i class="icon-warning"></i>
            <div>有轻度产后抑郁倾向，需心理支持</div>
          </div>
          <div class="special-note-item">
            <i class="icon-info"></i>
            <div>对声音敏感，希望保持安静环境</div>
          </div>
        </div>
      </div>
      <button class="btn" onclick="hidePopup('patient-profile-popup')">
        关闭
      </button>
    </div>

    <!-- 优化: 设备清单弹窗 -->
    <div class="overlay" id="checklist-overlay"></div>
    <div class="popup" id="checklist-popup">
      <h3>设备与耗材清单</h3>
      <div class="checklist-section">
        <h4>必备设备</h4>
        <div class="checklist-item">
          <input type="checkbox" id="equip1" checked />
          <label for="equip1">产后康复仪</label>
        </div>
        <div class="checklist-item">
          <input type="checkbox" id="equip2" checked />
          <label for="equip2">乳腺按摩仪</label>
        </div>
        <div class="checklist-item">
          <input type="checkbox" id="equip3" checked />
          <label for="equip3">电子血压计</label>
        </div>
        <div class="checklist-item">
          <input type="checkbox" id="equip4" checked />
          <label for="equip4">额温枪</label>
        </div>
        <div class="checklist-item">
          <input type="checkbox" id="equip5" checked />
          <label for="equip5">便携式胎心监护仪</label>
        </div>
      </div>
      <div class="checklist-section">
        <h4>必备耗材</h4>
        <div class="checklist-item">
          <input type="checkbox" id="supply1" checked />
          <label for="supply1">无菌纱布 (10包)</label>
        </div>
        <div class="checklist-item">
          <input type="checkbox" id="supply2" checked />
          <label for="supply2">无菌棉签 (2盒)</label>
        </div>
        <div class="checklist-item">
          <input type="checkbox" id="supply3" checked />
          <label for="supply3">生理盐水 (2瓶)</label>
        </div>
        <div class="checklist-item">
          <input type="checkbox" id="supply4" />
          <label for="supply4" class="warning">碘伏 (1瓶)</label>
        </div>
        <div class="checklist-item">
          <input type="checkbox" id="supply5" checked />
          <label for="supply5">医用手套 (10副)</label>
        </div>
        <div class="checklist-item">
          <input type="checkbox" id="supply6" checked />
          <label for="supply6">口罩 (10个)</label>
        </div>
        <div class="checklist-item">
          <input type="checkbox" id="supply7" checked />
          <label for="supply7">医用酒精 (1瓶)</label>
        </div>
      </div>
      <div class="checklist-section">
        <h4>其他物品</h4>
        <div class="checklist-item">
          <input type="checkbox" id="other1" checked />
          <label for="other1">产妇专用卫生巾 (1包)</label>
        </div>
        <div class="checklist-item">
          <input type="checkbox" id="other2" checked />
          <label for="other2">乳头保护罩 (1对)</label>
        </div>
        <div class="checklist-item">
          <input type="checkbox" id="other3" checked />
          <label for="other3">母乳储存袋 (5个)</label>
        </div>
        <div class="checklist-item">
          <input type="checkbox" id="other4" checked />
          <label for="other4">护理记录本 (1本)</label>
        </div>
      </div>
      <div class="confirm-section">
        <div class="checklist-item">
          <input type="checkbox" id="confirm-all" />
          <label for="confirm-all">我已确认所有设备和耗材已准备妥当</label>
        </div>
      </div>
      <button class="btn" onclick="hidePopup('checklist-popup')">确认</button>
    </div>

    <!-- 优化: 紧急情况处理弹窗 -->
    <div class="overlay" id="emergency-overlay"></div>
    <div class="popup emergency-popup" id="emergency-popup">
      <div class="emergency-header">
        <h3>紧急情况处理</h3>
        <div class="emergency-type">
          <button class="emergency-btn active">产后出血</button>
          <button class="emergency-btn">高热</button>
          <button class="emergency-btn">晕厥</button>
          <button class="emergency-btn">抽搐</button>
          <button class="emergency-btn">过敏反应</button>
        </div>
      </div>
      <div class="emergency-content">
        <div class="emergency-steps">
          <div class="emergency-step">
            <div class="step-number">1</div>
            <div class="step-content">立即按压子宫底部，检查出血量</div>
          </div>
          <div class="emergency-step">
            <div class="step-number">2</div>
            <div class="step-content">保持患者平卧，抬高下肢</div>
          </div>
          <div class="emergency-step">
            <div class="step-number">3</div>
            <div class="step-content">拨打120急救电话</div>
          </div>
          <div class="emergency-step">
            <div class="step-number">4</div>
            <div class="step-content">通知负责医生</div>
          </div>
          <div class="emergency-step">
            <div class="step-number">5</div>
            <div class="step-content">持续监测生命体征</div>
          </div>
        </div>
        <div class="emergency-contacts">
          <div class="emergency-contact">
            <div>急救电话</div>
            <a href="tel:120" class="contact-btn">120</a>
          </div>
          <div class="emergency-contact">
            <div>责任医生</div>
            <a href="tel:13900000000" class="contact-btn">张医生 13900000000</a>
          </div>
          <div class="emergency-contact">
            <div>护理主管</div>
            <a href="tel:13800000000" class="contact-btn">李主管 13800000000</a>
          </div>
        </div>
      </div>
      <button class="btn danger" onclick="callEmergency()">一键呼叫急救</button>
      <button class="btn secondary" onclick="hidePopup('emergency-popup')">
        关闭
      </button>
    </div>

    <!-- 优化: 远程会诊弹窗 -->
    <div class="overlay" id="remote-consult-overlay"></div>
    <div class="popup" id="remote-consult-popup">
      <h3>请求远程会诊</h3>
      <div class="consult-reason">
        <h4>会诊原因</h4>
        <select style="width: 100%; padding: 8px; margin-bottom: 15px">
          <option>伤口异常</option>
          <option>乳腺管阻塞</option>
          <option>高热</option>
          <option>异常出血</option>
          <option>其他问题</option>
        </select>
        <textarea
          placeholder="详细描述问题"
          rows="3"
          style="width: 100%; padding: 8px; margin-bottom: 15px"
        ></textarea>
      </div>
      <div class="online-doctors">
        <h4>当前在线医生</h4>
        <div class="doctor-item">
          <div class="flex">
            <div class="avatar">医生</div>
            <div>
              <div>王医生 (产科)</div>
              <div>三甲医院主治医师</div>
              <div class="status online">当前在线</div>
            </div>
          </div>
          <button class="btn small">请求会诊</button>
        </div>
        <div class="doctor-item">
          <div class="flex">
            <div class="avatar">医生</div>
            <div>
              <div>李医生 (妇科)</div>
              <div>三甲医院副主任医师</div>
              <div class="status online">当前在线</div>
            </div>
          </div>
          <button class="btn small">请求会诊</button>
        </div>
        <div class="doctor-item">
          <div class="flex">
            <div class="avatar">医生</div>
            <div>
              <div>张医生 (儿科)</div>
              <div>三甲医院主任医师</div>
              <div class="status offline">15分钟内可联系</div>
            </div>
          </div>
          <button class="btn small secondary">预约会诊</button>
        </div>
      </div>
      <button class="btn" onclick="hidePopup('remote-consult-popup')">
        关闭
      </button>
    </div>

    <!-- 优化: 价格明细弹窗 -->
    <div class="overlay" id="price-detail-overlay"></div>
    <div class="popup" id="price-detail-popup">
      <h3>价格明细</h3>
      <div class="price-detail-list">
        <div class="price-detail-item">
          <span>产后康复仪</span>
          <span>¥20/7天</span>
        </div>
        <div class="price-detail-item">
          <span>乳腺按摩仪</span>
          <span>¥15/7天</span>
        </div>
        <div class="price-detail-item">
          <span>远程监护设备</span>
          <span>¥30/14天</span>
        </div>
        <div class="price-detail-item">
          <span>产后伤口护理</span>
          <span>¥100/次</span>
        </div>
        <div class="price-detail-item">
          <span>母乳喂养指导</span>
          <span>¥80/次</span>
        </div>
        <div class="price-detail-item subtotal">
          <span>基础服务费</span>
          <span>¥245</span>
        </div>
        <div class="price-detail-item">
          <span>交通费</span>
          <span>¥15</span>
        </div>
        <div class="price-detail-item discount">
          <span>首次服务优惠</span>
          <span>-¥80</span>
        </div>
        <div class="price-detail-item total">
          <span>总计</span>
          <span>¥180</span>
        </div>
      </div>
      <button class="btn" onclick="hidePopup('price-detail-popup')">
        关闭
      </button>
    </div>

    <!-- 优化: 支付方式弹窗 -->
    <div class="overlay" id="payment-method-overlay"></div>
    <div class="popup" id="payment-method-popup">
      <h3>选择支付方式</h3>
      <div class="payment-methods">
        <div class="payment-method-item">
          <input type="radio" name="payment" id="wechat" checked />
          <label for="wechat">
            <div class="payment-icon wechat">微信</div>
            <div class="payment-name">微信支付</div>
          </label>
        </div>
        <div class="payment-method-item">
          <input type="radio" name="payment" id="alipay" />
          <label for="alipay">
            <div class="payment-icon alipay">支付宝</div>
            <div class="payment-name">支付宝</div>
          </label>
        </div>
        <div class="payment-method-item">
          <input type="radio" name="payment" id="medical-insurance" />
          <label for="medical-insurance">
            <div class="payment-icon insurance">医保</div>
            <div class="payment-name">医保支付</div>
          </label>
        </div>
        <div class="payment-method-item">
          <input type="radio" name="payment" id="cash" />
          <label for="cash">
            <div class="payment-icon cash">现金</div>
            <div class="payment-name">现金支付</div>
          </label>
        </div>
        <div class="payment-method-item">
          <input type="radio" name="payment" id="installment" />
          <label for="installment">
            <div class="payment-icon installment">分期</div>
            <div class="payment-name">分期付款</div>
          </label>
        </div>
      </div>
      <button class="btn" onclick="hidePopup('payment-method-popup')">
        确认支付方式
      </button>
    </div>

    <script>
      // 显示特定界面，并更新导航高亮
      function showScreen(index) {
        // 更新页面显示
        document.querySelectorAll(".screen-wrapper").forEach((s) => {
          s.classList.remove("active");
        });
        document.getElementById(`screen${index + 1}`).classList.add("active");

        // 更新导航高亮
        document.querySelectorAll(".nav-item").forEach((nav, idx) => {
          if (idx === index) {
            nav.classList.add("active");
          } else {
            nav.classList.remove("active");
          }
        });

        // 如果是从后续步骤跳到前面步骤，可以添加确认
        const currentStep = getCurrentStep();
        if (index < currentStep && currentStep > 2) {
          if (!confirm("返回前面的步骤可能会丢失当前操作，确定继续吗？")) {
            showScreen(currentStep); // 取消则保留在当前页面
            return;
          }
        }
      }

      // 获取当前步骤
      function getCurrentStep() {
        let currentStep = 0;
        document.querySelectorAll(".screen-wrapper").forEach((screen, idx) => {
          if (screen.classList.contains("active")) {
            currentStep = idx;
          }
        });
        return currentStep;
      }

      // 选择订单
      function selectOrder(order) {
        document.querySelectorAll(".card").forEach((c) => {
          c.classList.remove("selected");
        });
        order.classList.add("selected");
        showScreen(1);
      }

      // 显示弹窗
      function showPopup(id) {
        document.getElementById(id).style.display = "block";
        document.getElementById(id.replace("popup", "overlay")).style.display =
          "block";
      }

      // 隐藏弹窗
      function hidePopup(id) {
        document.getElementById(id).style.display = "none";
        document.getElementById(id.replace("popup", "overlay")).style.display =
          "none";
      }

      // 完成整个流程
      function completeProcess() {
        alert("服务完成，已收款");
        showScreen(0);
      }

      // 呼叫急救
      function callEmergency() {
        alert("已发起紧急呼叫，请按应急预案执行");
      }

      // 显示患者档案
      function showPatientProfile() {
        showPopup("patient-profile-popup");
      }

      // 显示设备准备清单
      function showChecklistPopup() {
        showPopup("checklist-popup");
      }

      // 显示应急处理
      function showEmergencyPopup() {
        showPopup("emergency-popup");
      }

      // 请求远程会诊
      function requestRemoteConsultation() {
        showPopup("remote-consult-popup");
      }
    </script>
  </body>
</html>
